<main>
    <section class="status-bar">
        <div class="url-to-share">
            <input value="{{urlToShare}}" disabled>
            <p-button pTooltip="Copy to clipboard" type="submit" (click)="copyToClipboard(urlToShare)"><i
                class="pi pi-copy"></i></p-button>
        </div>

        <div class="socket-connection-status">
            Connection:
            <i *ngIf="socketConnectionStatus === 0" class="pi pi-spin pi-spinner"></i>
            <i *ngIf="socketConnectionStatus === 1" class="pi pi-check-circle"></i>
            <i *ngIf="socketConnectionStatus === 2" class="pi pi-times-circle"></i>
        </div>
    </section>
    <div class="grid">
        <div>
            <section>
                <h3>Session Settings <i pTooltip="Will be auto-synced with other session users"
                                        class="pi pi-info-circle"></i></h3>
                <form [formGroup]="sessionSettings">
                    <label for="userInputCountdownMinutes" style="display: block">Minutes</label>
                    <p-inputNumber id="userInputCountdownMinutes" formControlName="inputMinutes"
                                   [showButtons]="true" buttonLayout="vertical" inputId="vertical"
                                   [min]="0" [max]="60" decrementButtonClass="p-button-secondary"
                                   incrementButtonClass="p-button-secondary" incrementButtonIcon="pi pi-plus"
                                   decrementButtonIcon="pi pi-minus">
                    </p-inputNumber>

                    <label for="userInputCountdownSeconds" style="display: block">Seconds</label>
                    <p-inputNumber id="userInputCountdownSeconds" formControlName="inputSeconds"
                                   [showButtons]="true" buttonLayout="vertical" inputId="vertical"
                                   [min]="0" [max]="60" decrementButtonClass="p-button-secondary"
                                   incrementButtonClass="p-button-secondary" incrementButtonIcon="pi pi-plus"
                                   decrementButtonIcon="pi pi-minus">
                    </p-inputNumber>


                    <label for="useNavigatorRole" style="display: block">Use Navigator-Role</label>
                    <p-inputSwitch id="useNavigatorRole" formControlName="useNavigatorRole"></p-inputSwitch>
                </form>
                <form  [formGroup]="userSpecificSettings">
                    <h3>User Settings <i pTooltip="Will NOT be synced with other session users"
                                         class="pi pi-info-circle"></i></h3>

                    <div>
                        <label for="selectSound" style="display: block">Select Sound</label>
                        <p-dropdown id="selectSound" [options]="sounds" formControlName="selectedSound" optionLabel="name"></p-dropdown>
                        <p-button pTooltip="Test Sound" type="button" [disabled]="countdownRunning.value"
                                  (onClick)="playSelectedSound()">
                            <i class="pi pi-play"></i>
                        </p-button>

                        <label for="audioVolume" style="display: block">Sound Volume</label>
                        <p-slider id="audioVolume" formControlName="audioVolume" [min]="0" [max]="100"></p-slider>
                    </div>
                </form>
            </section>
        </div>
        <div>
            <section>
                {{formatMilliSecondsToCountdownString(currentCountdownValue)}}
                <p-button *ngIf="!countdownRunning?.value" type="button"
                          (click)="onStartCountdown()">
                    <i class="pi pi-play"></i>
                </p-button>
                <p-button *ngIf="countdownRunning?.value" type="button"
                          (click)="onStopCountdown()">
                    <i class="pi pi-pause"></i>
                </p-button>
                <p-button type="button" [disabled]="countdownRunning.value"
                          (onClick)="onResetCountdown()">
                    <i class="pi pi-refresh"></i>
                </p-button>
            </section>
            <section>
                <h3>Participants</h3>
                <app-participants-list [participants]="participants"></app-participants-list>
                <div>
                    <p-button type="button" (click)="onShuffleParticipants()">Shuffle Participants</p-button>
                </div>
            </section>
        </div>
    </div>
</main>

